#!/bin/bash

# Production proxibase startup script

PROX="/usr/local/prox"
LOGDIR="/var/log/prox"
PROXLOG="$LOGDIR/prox.log"
ERRLOG="$LOGDIR/proxerr.log"

echo "proxerr.log: $ERRLOG"
echo "prox.log: $PROXLOG"

cd $PROX
nohup node --stack-trace-limit=200 ./prox.js $@ >>$PROXLOG 2>>$ERRLOG &

echo "waiting 5 seconds..."
sleep 5
cat $PROXLOG
echo
